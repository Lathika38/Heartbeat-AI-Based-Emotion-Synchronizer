<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supabase Auth Test</title>
    <!-- We are importing the supabase-js library from a CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; gap: 20px; padding: 20px; }
        .container { border: 1px solid #ccc; padding: 20px; border-radius: 8px; width: 400px; }
        input { width: 100%; padding: 8px; margin-bottom: 10px; box-sizing: border-box; }
        button { padding: 10px 15px; cursor: pointer; }
        pre { background-color: #f4f4f4; border: 1px solid #ddd; padding: 10px; white-space: pre-wrap; word-wrap: break-word; }
    </style>
</head>
<body>

    <h1>Supabase Auth Test Page</h1>

    <div class="container">
        <h2>Sign Up / Sign In</h2>
        <input type="email" id="email" placeholder="Enter your email" />
        <input type="password" id="password" placeholder="Enter your password" />
        <button id="signUpBtn">Sign Up</button>
        <button id="signInBtn">Sign In</button>
        <button id="signOutBtn">Sign Out</button>
    </div>

    <div class="container">
        <h2>Result</h2>
        <pre id="result">Waiting for action...</pre>
    </div>

    <script>
        // --- ⬇️ 1. REPLACE THESE WITH YOUR OWN KEYS ⬇️ ---
        const SUPABASE_URL = 'https://lkyszixopxtjbvrrkngl.supabase.co'; // Replace with your Project URL
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxreXN6aXhvcHh0amJ2cnJrbmdsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY5MTM3MjAsImV4cCI6MjA3MjQ4OTcyMH0.d-hzfKA5eqAgRz9ZNDvT5qh5LuZBNzMwhU4Vx0f8YF8';          // Replace with your anon public key
        // --- ⬆️ 1. REPLACE THESE WITH YOUR OWN KEYS ⬆️ ---

        // 2. Initialize the Supabase client
        // This creates a connection to your Supabase project.
        const { createClient } = supabase;
        const _supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        console.log('Supabase client initialized:', _supabase);

        // 3. Get references to the HTML elements
        const emailInput = document.getElementById('email');
        const passwordInput = document.getElementById('password');
        const signUpButton = document.getElementById('signUpBtn');
        const signInButton = document.getElementById('signInBtn');
        const signOutButton = document.getElementById('signOutBtn');
        const resultDiv = document.getElementById('result');

        // 4. Create the Sign Up function
        const signUpUser = async () => {
            const email = emailInput.value;
            const password = passwordInput.value;
            
            // This is the core Supabase function for signing up a new user
            const { data, error } = await _supabase.auth.signUp({
                email: email,
                password: password,
            });

            if (error) {
                resultDiv.textContent = `Error: ${error.message}`;
            } else {
                resultDiv.textContent = 'Sign up successful! Please check your email for confirmation.\n\nUser Data:\n' + JSON.stringify(data, null, 2);
            }
        };

        // 5. Create the Sign In function
        const signInUser = async () => {
            const email = emailInput.value;
            const password = passwordInput.value;

            // This is the core Supabase function for signing in an existing user
            const { data, error } = await _supabase.auth.signInWithPassword({
                email: email,
                password: password,
            });

            if (error) {
                resultDiv.textContent = `Error: ${error.message}`;
            } else {
                resultDiv.textContent = 'Sign in successful!\n\nSession Data:\n' + JSON.stringify(data, null, 2);
            }
        };
        
        // 6. Create the Sign Out function
        const signOutUser = async () => {
            const { error } = await _supabase.auth.signOut();
            if (error) {
                 resultDiv.textContent = `Error: ${error.message}`;
            } else {
                 resultDiv.textContent = 'Successfully signed out.';
                 emailInput.value = '';
                 passwordInput.value = '';
            }
        };

        // 7. Add event listeners to the buttons
        signUpButton.addEventListener('click', signUpUser);
        signInButton.addEventListener('click', signInUser);
        signOutButton.addEventListener('click', signOutUser);
    </script>
</body>
</html>